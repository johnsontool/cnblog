---
title: 批量从MP4视频中提取MP3音频
date: 2024-01-20 11:04:26
author: tfzhang
tags:
  - ffmpeg
  - video processing
  - batch script
---

如果手动一个一个地从多个视频文件中提取音频会很繁琐。无论您是在存档讲座、从视频文件创建音乐播放列表，还是只需要从MP4视频中分离音轨，自动化都可以节省大量时间。
在本指南中，您将学习如何使用**FFmpeg**和一个简短的**Windows批处理脚本**来**批量从MP4视频中提取MP3文件**——无需手动转换。

---

## 工具

* **FFmpeg** – 一个免费、强大的音频和视频处理命令行工具
* **Windows批处理脚本** – 用于自动化重复的FFmpeg命令

---

## 步骤

1. **安装FFmpeg（Windows版本）**

   * 从[ffmpeg.org](https://ffmpeg.org/download.html)下载官方FFmpeg构建版本。
   * 将`ffmpeg.exe`路径添加到Windows环境变量中，或者将其放置在与视频相同的目录中。

2. **创建批处理脚本**

   * 打开记事本并粘贴以下脚本：

     ```bash
     @echo off
     for %%a in (*.mp4) do (
         ffmpeg -i "%%a" -vn -acodec libmp3lame -qscale:a 0 "%%~na.mp3"
     )
     ```
   * 将文件保存为`extract_mp3.bat`，保存在与MP4视频相同的文件夹中。

3. **运行脚本**

   * 双击`.bat`文件。
   * 脚本将遍历所有`.mp4`文件，并在同一目录中将其音频提取为`.mp3`。

---

## 工作原理

* **@echo off** — 在终端窗口中抑制命令输出。
* **for %%a in (*.mp4)** — 遍历当前文件夹中的每个MP4文件。
* **ffmpeg -i "%%a"** — 指定输入视频文件。
* **-vn** — 排除视频输出（仅音频）。
* **-acodec libmp3lame** — 使用LAME MP3编码器。
* **-qscale:a 0** — 设置最佳音频质量（0 = 最高）。
* **"%%~na.mp3"** — 以原始视频命名输出文件，仅更改扩展名。

---

## 注意事项

* 您可以调整`-qscale:a`来平衡文件大小和质量（例如，`2`表示中等质量）。
* 对于其他音频格式（如`.wav`或`.aac`），只需替换编解码器和文件扩展名。
* FFmpeg必须正确安装或位于同一目录中，脚本才能运行。

---

这个简单的工作流程自动化了本应是重复性的任务。通过FFmpeg和批处理文件，您可以在几秒钟内将整个文件夹的MP4视频转换为MP3 —— 非常适合播客制作、音乐存档或快速音频提取。